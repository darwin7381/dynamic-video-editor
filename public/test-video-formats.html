<!DOCTYPE html>
<html>
<head>
  <title>影片格式測試</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .test { margin: 20px 0; padding: 15px; border: 2px solid #ddd; }
    .result { margin-top: 10px; padding: 8px; border-radius: 4px; }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>🎬 影片格式與 CORS 測試</h1>
  
  <div class="test">
    <h2>測試 1: Google 影片（有 CORS）</h2>
    <video id="v1" width="400" controls>
      <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" type="video/mp4">
    </video>
    <div id="r1" class="result">測試中...</div>
  </div>
  
  <div class="test">
    <h2>測試 2: 2050today 影片（無 CORS）</h2>
    <video id="v2" width="400" controls>
      <source src="https://2050today.org/wp-content/uploads/2020/07/Video-Placeholder.mp4" type="video/mp4">
    </video>
    <div id="r2" class="result">測試中...</div>
  </div>
  
  <div class="test">
    <h2>測試 3: 你的 R2 影片（有 CORS）</h2>
    <video id="v3" width="400" controls>
      <source src="https://files.blocktempo.ai/Video-Placeholder.mp4" type="video/mp4">
    </video>
    <div id="r3" class="result">測試中...</div>
  </div>

  <script>
    [1, 2, 3].forEach(i => {
      const video = document.getElementById(`v${i}`);
      const result = document.getElementById(`r${i}`);
      
      video.addEventListener('loadedmetadata', () => {
        result.textContent = `✅ 成功載入 - 時長: ${video.duration.toFixed(1)}s, 尺寸: ${video.videoWidth}x${video.videoHeight}`;
        result.className = 'result success';
      });
      
      video.addEventListener('error', (e) => {
        const error = video.error;
        const errorMessages = ['', 'ABORTED', 'NETWORK', 'DECODE', 'NOT_SUPPORTED'];
        result.textContent = `❌ 載入失敗 - Code: ${error?.code} (${errorMessages[error?.code || 0]}) - ${error?.message || ''}`;
        result.className = 'result error';
      });
    });
  </script>
</body>
</html>

